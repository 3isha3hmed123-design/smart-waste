# -*- coding: utf-8 -*-
"""smartwaste

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/14a-OKD2NRH4fiWW0OfvQzXl9FpHNrHI-
"""



import os
os.environ["GEMINI_API_KEY"] = ""

import streamlit as st
import os
import google.generativeai as genai

# =========================
#   Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Gemini
# =========================
GEMINI_API_KEY = os.environ.get("GEMINI_API_KEY", "")

gemini_model = None
gemini_configured = False
gemini_error = ""

if GEMINI_API_KEY:
    try:
        genai.configure(api_key=GEMINI_API_KEY)
        gemini_model = genai.GenerativeModel("gemini-2.5-flash")
        gemini_configured = True
    except Exception as e:
        gemini_error = str(e)
else:
    gemini_error = "âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ GEMINI_API_KEY ÙÙŠ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦ÙŠØ©."


# =========================
#   Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØµÙØ­Ø©
# =========================
st.set_page_config(
    page_title="SmartWaste",
    page_icon="â™»ï¸",
    layout="wide"
)

# =========================
#   Ø§Ù„ØªØµÙ…ÙŠÙ…
# =========================
st.markdown("""
    <style>
    .main-title {
        font-size: 3rem;
        font-weight: 800;
        text-align: center;
        margin-bottom: 0.3rem;
    }
    .subtitle {
        font-size: 1.2rem;
        text-align: center;
        color: #d0d0d0;
        margin-bottom: 2rem;
    }
    .hero {
        border-radius: 20px;
        padding: 2rem;
        background: linear-gradient(135deg, #1b5e20, #004d40);
        color: white;
        text-align: center;
        margin-bottom: 1.5rem;
    }
    .section-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: #00c853;
        margin-top: 1.5rem;
        margin-bottom: 1rem;
    }
    </style>
""", unsafe_allow_html=True)


# =========================
#   Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ©
# =========================
st.sidebar.title("â™»ï¸ SmartWaste")
page = st.sidebar.radio(
    "Ø§Ø®ØªØ± ØµÙØ­Ø©:",
    ["Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", "ØªØ´Ø§ØªØ¨ÙˆØª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±"]
)


# =========================
#   Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
# =========================
if page == "Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©":
    st.markdown('<div class="hero">', unsafe_allow_html=True)
    st.markdown('<div class="main-title">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ SmartWaste</div>', unsafe_allow_html=True)
    st.markdown(
        '<div class="subtitle">ØªØ·Ø¨ÙŠÙ‚ Ø°ÙƒÙŠ ÙŠÙ‚Ø¯Ù… Ù„Ùƒ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø­ÙˆÙ„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ± ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù†ÙØ§ÙŠØ§Øª.</div>',
        unsafe_allow_html=True
    )
    st.markdown("</div>", unsafe_allow_html=True)


# =========================
#   PAGE â€“ CHATBOT
# =========================
elif page == "ØªØ´Ø§ØªØ¨ÙˆØª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±":
    st.markdown('<div class="section-title">ğŸ’¬ ØªØ´Ø§ØªØ¨ÙˆØª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±</div>', unsafe_allow_html=True)

    if not gemini_configured:
        st.error("âŒ Gemini ØºÙŠØ± Ù…ÙØ¹Ù‘Ù„.")
        st.code(gemini_error)
    else:
        user_q = st.text_input("Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§:")

        if st.button("Ø¥Ø±Ø³Ø§Ù„"):
            prompt = (
                "Ø£Ù†Øª Ù…Ø³Ø§Ø¹Ø¯ Ù…ØªØ®ØµØµ ÙÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¯ÙˆÙŠØ±.\n"
                "Ø£Ø¬Ø¨ Ø¨Ø¥ÙŠØ¬Ø§Ø² ÙˆØ¨Ø´ÙƒÙ„ ÙˆØ§Ø¶Ø­.\n\n"
                f"Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: {user_q}"
            )
            try:
                response = gemini_model.generate_content(prompt)
                st.success("Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬:")
                st.write(response.text)
            except Exception as e:
                st.error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ Gemini.")
                st.code(str(e))


